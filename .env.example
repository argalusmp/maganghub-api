# Database Configuration
# Use Supabase PgBouncer connection for runtime and Prisma client
DATABASE_URL="postgresql://postgres.xxxx:[YOUR-PASSWORD]@aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres?pgbouncer=true"

# Direct connection for Prisma migrations (non-pooled)
DIRECT_URL="postgresql://postgres.xxxx:[YOUR-PASSWORD]@aws-1-ap-southeast-1.pooler.supabase.com:5432/postgres"

# Server Configuration
PORT=3000
NODE_ENV=development
TZ=Asia/Jakarta

# External API
MAGANGHUB_BASE=https://maganghub.kemnaker.go.id/be/v1/api

# CORS Configuration
FRONTEND_ORIGIN=*

# Saweria Webhook (for alerts)
SAWERIA_SECRET_TOKEN=your-secret-token-here

# ETL/Sync Configuration
# Full sync runs daily at 3 AM WIB
ETL_FULL_CRON=0 3 * * *

# Incremental sync runs every 2 hours
ETL_INC_CRON=0 */2 * * *

# Maximum pages to fetch per sync operation
ETL_MAX_PAGES=3

# Number of items per page
ETL_LIMIT=50

# Delay between API requests (milliseconds)
REQUEST_DELAY_MS=800

# Early stop threshold for incremental sync
STOP_THRESHOLD=100

# Hours to consider an internship as "new"
NEW_WINDOW_HOURS=72

# HTTP Client Configuration
# Request timeout in milliseconds (60 seconds)
HTTP_TIMEOUT_MS=60000

# Maximum retry attempts for failed requests
HTTP_MAX_RETRIES=3

# Base delay between retries in milliseconds (exponential backoff applied)
HTTP_RETRY_DELAY_MS=2000

# Safety limits for deactivation (to prevent data loss)
# Maximum percentage of active internships that can be deactivated in one run
MAX_DEACTIVATION_PERCENT=10

# Minimum number of internships that can be deactivated (safety floor)
MIN_DEACTIVATION_COUNT=10
